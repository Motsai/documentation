<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>


    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  </head>

  <body class="powermanagement">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
     <a href="http://www.motsai.com">
      <img src="images/logo.png" />
     </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="power-management-api-0x02">Power Management API (0x02)</h1>

<h2 id="get-battery-level-state-of-charge">Get Battery Level (State of Charge)</h2>
<pre class="highlight c"><code><span class="n">GET_BAT_LEVEL</span> <span class="mh">0x00</span>
</code></pre>

<table><thead>
<tr>
<th style="text-align: center">HEADER(0-3)</th>
<th style="text-align: center">Command</th>
<th style="text-align: center">Bit 0</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">Reserved</td>
<td style="text-align: center">Mode[1:0]</td>
<td style="text-align: center">Direction</td>
</tr>
</tbody></table>

<p>Note: When requested over BLE, this command will not get a response out of the Neblina Custom Characteristic.  Bluetooth standardizes the battery information.  To get the battery level via BLE, simply read it from the standard org.bluetooth.characteristic.battery_level characteristic (0x2A19).</p>

<p>This command is usually used internally within Neblina between the application processor and the radio IC.  It would therefore only apply for advanced users who want to program inside the Neblina module.</p>

<p>Regarding the power management&rsquo;s single command, the data consists of only 2 valid bytes (Byte#8-9), representing the percentage of the battery level with one decimal fractional digit precision, i.e., an unsigned integer within the range of [0, 1000]:
Byte#8: battery level (%), Least Significant Byte (LSB)
Byte#9: battery level (%), Most Significant Byte (MSB)</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
