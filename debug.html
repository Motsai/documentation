<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>


    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  </head>

  <body class="debug">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
     <a href="http://www.motsai.com">
      <img src="images/logo.png" />
     </a>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="debug-subsystem-0x00">Debug subsystem (0x00)</h1>

<p><strong>Important: this subsystem is used to support debug modes of Neblina.  Programmers should not rely on those functions for 
production code.  However, it can be very useful to validate custom protocols, error rates, performance monitors, memory usage, etc.</strong></p>

<h2 id="motivation">Motivation</h2>

<p>Observability and controllability are essential components of the debugging process.  Bugs in distributed systems
such as sensor networks, remotely connected systems are notoriously more difficult to diagnose because when the code
misbehaves, the root cause can be hidden very deep.  By implementing small trace buffers, event counters, error counters,
one can essentially add important visibility into those systems.  This is the reason that this subsystem is implemented
at the core of Neblina.</p>

<h2 id="commands">Commands</h2>

<h3 id="debug-set-interface-0x01">Debug - Set Interface (0x01)</h3>
<pre class="highlight c"><code><span class="cp">#define DEBUG_CMD_SET_INTERFACE 0x01
</span></code></pre>

<p>There is also a single command corresponding to the Debug mode, that is to set the interface protocol between the host and Neblina. By default, the interface is set to BLE, but we can set the interface to UART as well. Here is the command code for setting the interface:</p>

<table><thead>
<tr>
<th>Packet</th>
</tr>
</thead><tbody>
<tr>
<td>Header: Bytes(0-3)</td>
</tr>
<tr>
<td>Data (4-7): RESERVED</td>
</tr>
<tr>
<td>Data (8):</td>
</tr>
<tr>
<td>* 0x00 MCU receives commands and responds to them through the BLE interface</td>
</tr>
<tr>
<td>* 0x01 MCU receives commands and responds to them through the debug UART interface.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
